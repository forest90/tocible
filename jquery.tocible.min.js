/*
 * jquery.tocible.min.js v1.2.0, jQuery Tocible
 *
 * Under MIT license, available at http://www.opensource.org/licenses/MIT.
 *
 * A lightweight table of contents navigation plugin
 * https://github.com/markserbol/tocible
 *
 */
 !function(t){var o={heading:"h2",subheading:"h3",reference:".ref",title:"",hash:!1,offsetTop:50,speed:800,collapsible:!0,maxWidth:150};t.fn.tocible=function(e){var i=t.extend({},o,e);return this.each(function(){var o,e,s,l,n,c=t(this);if(c.find(".tocible").remove(),e=c.find(i.reference),e.css({visibility:"hidden"}),n=e.offset().left,o=t("<div/>",{"class":"tocible",html:"<ul/>"}),o.css({"max-width":i.maxWidth}),c.append(o).css({position:"relative"}),i.title){var a=t(i.title).length?t(i.title).text():i.title,f=t("<div/>",{"class":"tocible_header",html:a+"<span/>"});f.prependTo(o).click(function(){t(this).siblings("ul").slideToggle({duration:"slow",step:contain}),t(this).find("span").toggleClass("toc_open")})}s=c.find(i.heading),l=c.find(i.subheading),s.add(l).each(function(){var o,e,n,c,a,f=t(this);o=f.attr("id")?"#"+f.attr("id"):"#",e=f.text(),f.is(s)?n="heading":f.is(l)&&(n="subheading"),c=t("<a/>",{text:e,href:o}),a=t("<li/>",{"class":"tocible_"+n}),a.append(c).appendTo(".tocible > ul"),c.click(function(e){e.preventDefault();var s=f.offset();if(i.hash){var l=t(window).scrollTop();history.pushState?history.pushState({},document.title,o):(window.location.hash=o,t(window).scrollTop(l))}offsetAnchror=i.offsetAnchror,offsetAnchror||(offsetAnchror=10),t("html, body").stop(!0).animate({scrollTop:s.top-offsetAnchror},i.speed)})}),contain=function(){var s=t(window).scrollTop(),l=c.offset().top;o.css({top:i.offsetTop,bottom:"auto",left:n}),l+c.outerHeight()<=s+o.height()+i.offsetTop?o.css({position:"absolute",bottom:0,top:"auto",left:e.position().left}):s>=l?o.css({position:"fixed",bottom:"auto",top:i.offsetTop,left:e.offset().left}):o.css({position:"absolute",left:e.position().left})},onScroll=function(){i.collapsible&&t(".tocible li.tocible_subheading").hide(),s.add(l).each(function(o){var e=t(this),s=e.offset().top,l=t(".tocible li").eq(o),n=t(window).scrollTop();n>=s-20?(l.addClass("toc_scrolled").siblings().removeClass("toc_scrolled"),i.collapsible&&(l.siblings().filter(".tocible_subheading").hide(),l.is(".tocible_subheading")?l.prevAll(".tocible_heading:first").nextUntil(".tocible_heading").show():l.is(".tocible_heading")&&l.nextUntil(".tocible_heading").show())):l.removeClass("toc_scrolled")})},t(window).on("resize scroll",function(t){contain(),onScroll()}).trigger("scroll")})}}(jQuery);